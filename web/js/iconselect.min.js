function IconSelect(i,l){var t,o=[],n=-1,c=IconSelect.DEFAULT;function s(){}function e(){}this.refresh=function(e){o=[];for(var t=this.setSelectedIndex,n=0;n<e.length;n++)e[n].element=s.createIcon(e[n].iconFilePath,e[n].iconValue,n,l),e[n].element.onclick=function(){t(this.childNodes[0].getAttribute("icon-index"))},o.push(e[n]);var c=Math.round(e.length/l.vectoralIconNumber);s.boxElement.style.height=(l.iconsHeight+2)*c+(c+1)*l.boxIconSpace,this.setSelectedIndex(0)},this.getIcons=function(){return o},this.setSelectedIndex=function(e){var t;o.length>e&&(t=o[e]),t&&(-1!=n&&o[n].element.setAttribute("class","icon"),n=e,s.selectedIconImgElement.setAttribute("src",t.iconFilePath),-1!=n&&o[n].element.setAttribute("class","icon selected")),s.iconSelectElement.dispatchEvent(new Event("changed"))},this.getSelectedIndex=function(){return n},this.getSelectedValue=function(){return o[n].iconValue},this.getSelectedFilePath=function(){return o[n].iconFilePath},s.showBox=function(e){null==e&&(e="none"==s.boxElement.style.display),e?(s.boxElement.style.display="block",s.boxScrollElement.style.display="block",t=t||new iScroll(i+"-box-scroll")):(s.boxElement.style.display="none",s.boxScrollElement.style.display="none"),s.boxElement.style.display=e?"block":"none"},s.setIconSelectElement=function(e){return s.iconSelectElement=document.getElementById(e)},s.clearUI=function(){s.iconSelectElement.innerHTML=""},s.clearIcons=function(){s.boxElement.innerHTML=""},s.createUI=function(e){s.clearUI(),s.iconSelectElement.setAttribute("class","icon-select");var t=document.createElement("div");t.setAttribute("class","selected-box");var n=document.createElement("div");n.setAttribute("class","selected-icon"),(s.selectedIconImgElement=document.createElement("img")).setAttribute("src",""),n.appendChild(s.selectedIconImgElement);var c=document.createElement("div");c.setAttribute("class","component-icon");var l=document.createElement("img");l.setAttribute("src",IconSelect.COMPONENT_ICON_FILE_PATH),c.appendChild(l),(s.boxScrollElement=document.createElement("div")).setAttribute("id",i+"-box-scroll"),s.boxScrollElement.setAttribute("class","box"),s.boxElement=document.createElement("div"),s.boxScrollElement.appendChild(s.boxElement),s.selectedIconImgElement.setAttribute("width",e.selectedIconWidth),s.selectedIconImgElement.setAttribute("height",e.selectedIconHeight),n.style.width=e.selectedIconWidth,n.style.height=e.selectedIconHeight,t.style.width=e.selectedIconWidth+e.selectedBoxPadding+e.selectedBoxPaddingRight,t.style.height=e.selectedIconHeight+2*e.selectedBoxPadding,n.style.top=e.selectedBoxPadding,n.style.left=e.selectedBoxPadding,c.style.bottom=4+e.selectedBoxPadding,s.boxScrollElement.style.left=parseInt(t.style.width)+1,s.boxScrollElement.style.width=(e.iconsWidth+2)*e.vectoralIconNumber+(e.vectoralIconNumber+1)*e.boxIconSpace,s.boxScrollElement.style.height=(e.iconsHeight+2)*e.horizontalIconNumber+(e.horizontalIconNumber+1)*e.boxIconSpace,s.boxElement.style.left=s.boxScrollElement.style.left,s.boxElement.style.width=s.boxScrollElement.style.width,s.iconSelectElement.appendChild(t),t.appendChild(n),t.appendChild(c),t.appendChild(s.boxScrollElement);var o={};return o.iconSelectElement=s.iconSelectElement,o.selectedBoxElement=t,o.selectedIconElement=n,o.selectedIconImgElement=s.selectedIconImgElement,o.componentIconElement=c,o.componentIconImgElement=l,o},s.createIcon=function(e,t,n,c){var l=document.createElement("div");l.setAttribute("class","icon"),l.style.width=c.iconsWidth,l.style.height=c.iconsHeight,l.style.marginLeft=c.boxIconSpace,l.style.marginTop=c.boxIconSpace;var o=document.createElement("img");return o.setAttribute("src",e),o.setAttribute("icon-value",t),o.setAttribute("icon-index",n),o.setAttribute("width",c.iconsWidth),o.setAttribute("height",c.iconsHeight),l.appendChild(o),s.boxElement.appendChild(l),l},e.checkParameters=function(e){return e.selectedIconWidth=e.selectedIconWidth?e.selectedIconWidth:c.SELECTED_ICON_WIDTH,e.selectedIconHeight=e.selectedIconHeight?e.selectedIconHeight:c.SELECTED_ICON_HEIGHT,e.selectedBoxPadding=e.selectedBoxPadding?e.selectedBoxPadding:c.SELECTED_BOX_PADDING,e.selectedBoxPaddingRight=e.selectedBoxPaddingRight?e.selectedBoxPaddingRight:c.SELECTED_BOX_PADDING_RIGHT,e.iconsWidth=e.iconsWidth?e.iconsWidth:c.ICONS_WIDTH,e.iconsHeight=e.iconsHeight?e.iconsHeight:c.ICONS_HEIGHT,e.boxIconSpace=e.boxIconSpace?e.boxIconSpace:c.BOX_ICON_SPACE,e.vectoralIconNumber=e.vectoralIconNumber?e.vectoralIconNumber:c.VECTORAL_ICON_NUMBER,e.horizontalIconNumber=e.horizontalIconNumber?e.horizontalIconNumber:c.HORIZONTAL_ICON_NUMBER,e},l||(l={}),s.setIconSelectElement(i)?(l=e.checkParameters(l),s.createUI(l,i),s.iconSelectElement.onclick=function(){s.showBox()},s.showBox(!1),s.iconSelectElement.addEventListener("click",function(e){e.stopPropagation()}),window.addEventListener("click",function(){s.showBox(!1)})):alert("Element not found.")}IconSelect.DEFAULT={},IconSelect.DEFAULT.SELECTED_ICON_WIDTH=48,IconSelect.DEFAULT.SELECTED_ICON_HEIGHT=48,IconSelect.DEFAULT.SELECTED_BOX_PADDING=1,IconSelect.DEFAULT.SELECTED_BOX_PADDING_RIGHT=12,IconSelect.DEFAULT.ICONS_WIDTH=32,IconSelect.DEFAULT.ICONS_HEIGHT=32,IconSelect.DEFAULT.BOX_ICON_SPACE=1,IconSelect.DEFAULT.HORIZONTAL_ICON_NUMBER=3,IconSelect.DEFAULT.VECTORAL_ICON_NUMBER=3,IconSelect.COMPONENT_ICON_FILE_PATH="images/control/icon-select/arrow.png";